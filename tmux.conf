set -g mouse on                          # Enable mouse support for panes and windows.
set -g history-limit 100000              # Increase scrollback history size.
set -g base-index 1                       # Start window numbering at 1.
setw -g pane-base-index 1                 # Start pane numbering at 1.
set -g renumber-windows on                # Keep window numbers sequential after close.
set -g allow-rename off                   # Prevent programs from renaming windows.
setw -g automatic-rename off              # Disable automatic window renaming.
setw -g mode-keys vi                      # Use vi keys in copy mode.
set -g status-keys vi                     # Use vi keys in the status line.
set -g set-clipboard on                   # Sync tmux yank to system clipboard.
set -g @clipboard-copy "$HOME/.sidorenko_dotfiles/bin/clip"
set -g default-terminal "screen-256color" # Advertise 256-color terminal.
set -as terminal-overrides ",*:Tc"        # Enable truecolor where supported.
unbind C-b                                # Replace default prefix.
set -g prefix C-a                         # Common prefix used by many power users.
bind C-a send-prefix                      # Send literal C-a to programs when needed.

unbind '"'                               # Remove default horizontal split binding.
unbind %                                 # Remove default vertical split binding.
bind | split-window -h                   # Bind | to split window horizontally.
bind - split-window -v                   # Bind - to split window vertically.
bind r source-file ~/.tmux.conf \; display-message "tmux reloaded" # Reload config quickly.

bind h select-pane -L                    # Move to the left pane with h.
bind j select-pane -D                    # Move to the below pane with j.
bind k select-pane -U                    # Move to the above pane with k.
bind l select-pane -R                    # Move to the right pane with l.
bind -n M-h select-pane -L               # Move panes without prefix.
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R
bind -r H resize-pane -L 5               # Resize left by 5 columns with H.
bind -r J resize-pane -D 5               # Resize down by 5 rows with J.
bind -r K resize-pane -U 5               # Resize up by 5 rows with K.
bind -r L resize-pane -R 5               # Resize right by 5 columns with L.
bind -n M-H resize-pane -L 5             # Resize panes without prefix.
bind -n M-J resize-pane -D 5
bind -n M-K resize-pane -U 5
bind -n M-L resize-pane -R 5
bind -n M-, previous-window              # Switch windows without prefix.
bind -n M-. next-window
bind -n M-n new-window                   # Create a new window without prefix.

bind -T copy-mode-vi v send -X begin-selection   # Start selection in copy mode.
bind -T copy-mode-vi y send -X copy-pipe-and-cancel "#{@clipboard-copy}"
bind -T copy-mode-vi r send -X rectangle-toggle  # Toggle rectangle selection.

set -g status-interval 5                 # Refresh status line every 5 seconds.
set -g status-left-length 30             # Limit left status length.
set -g status-right-length 80            # Limit right status length.
set -g window-status-current-style bg=colour226 # Highlight active window with yellow background.
set -g status-left "#S #[fg=colour8]|"   # Show session name on the left.
set -g status-right "#(whoami)@#H #[fg=colour8]| %Y-%m-%d %H:%M" # Show user/host/time on right.

# Enter copy-mode with C-u (unless in alternate screen), then halfpage up.
bind -n C-u if-shell -F "#{alternate_on}" "send-keys C-u" "copy-mode; send-keys -X halfpage-up"
bind -n M-s copy-mode                    # Fast key to enter scroll/copy mode.
# Halfpage scrolling in copy-mode with vim-style keys.
bind -T copy-mode-vi C-u send-keys -X halfpage-up
bind -T copy-mode-vi C-d send-keys -X halfpage-down
